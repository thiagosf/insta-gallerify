{"version":3,"sources":["components/Header.js","components/Footer.js","components/Photo.js","components/LazyImage.js","utils/api.js","utils/image_utils.js","components/Gallery.js","components/GalleryFilter.js","components/GalleryFilters.js","components/Spinner.js","components/App.js","index.js"],"names":["headerButton","_ref","onClick","enabled","name","icon","classes","concat","push","join","react_default","a","createElement","className","role","aria-label","Header","state","username","valid","fullscreen","enableFilters","_getClasses","_this","props","loading","_handleKey","event","key","_setValid","_handleBlur","_handleChange","setState","target","value","trim","onSetUsername","_edit","input","select","_toggleFullScreen","document","body","requestFullscreen","catch","error","exitFullscreen","_toggleEnableFilters","onEnableFilters","_onFullscreenChange","isFullScreen","addEventListener","this","removeEventListener","prevProps","_this2","_this$state","ref","type","placeholder","onChange","onKeyPress","onBlur","Component","defaultProps","filters","Footer","href","Photo","_friendlyLikes","likes","numeral","format","_getLink","shortcode","_getDate","timestamp","Date","toLocaleString","_getFavoriteClasses","favorite","_toggleFavorite","onFavorite","url","rel","src","alt","lazyLoadInstance","LazyLoad","elements_selector","LazyImage","_React$Component","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","update","_this$props","srcset","sizes","width","height","others","objectWithoutProperties","assign","data-src","data-srcset","data-sizes","React","api","fetchMock","edges","require","graphql","user","edge_owner_to_timeline_media","Promise","resolve","filter","filterImages","map","buildImageItem","fetchUser","limit","length","undefined","fetch","then","response","ok","Error","json","result","is_private","promises","images","id","_result$graphql$user$","count","hasNextPage","page_info","has_next_page","endCursor","end_cursor","isPrivate","page","loop","query","query_hash","variables","urlPagination","status","data","forEach","item","console","log","all","node","edge_liked_by","edge_media_preview_like","display_url","thumbnail_url","thumbnail_src","taken_at_timestamp","is_video","image_utils","sort","filteredImages","_","sortBy","reverse","slice","toggleFavorite","photo","favorites","getFavorites","find","JSON","stringify","localStorage","setItem","isFavorite","getItem","parse","Gallery","loaded","thumbViewScrollTop","showThumbView","selected","_onFavorite","imageUtils","_getThumbView","_getClassesThumbView","toConsumableArray","index","includes","components_LazyImage","onSelectImage","onLoad","_onScrollChange","top","querySelector","scrollTop","_setThumbViewScrollTop","endTop","el","setTimeout","slider","slickGoTo","thumbView","_this3","slides","image","components_Photo","lib_default","dots","infinite","speed","slidesToShow","slidesToScroll","variableWidth","accessibility","lazyLoad","GalleryFilter","_getItems","values","label","GalleryFilters","_getSortFilters","_this$props$filters$s","components_GalleryFilter","_onChangeFilter","_getLimitFilters","_this$props$filters$l","_getModeFilters","_this$props$filters$m","mode","Spinner","App","tempUsername","showThumbs","lastLimit","enabledFilters","exampleUsers","_onSetUsername","params","_objectSpread","split","parts","formatedParams","window","history","pushState","title","_loadData","message","finally","_galleryImages","list","_onFilter","defineProperty","_changeFiltersInURL","_getExampleUsers","_checkUsernameInHash","hash","_parts$1$split","_parts$1$split2","slicedToArray","_onHashChange","newURL","_onSelectImage","gallery","goTo","_onEnableFilters","_this$state2","param","_onChanageInput","_onKeyPressInput","location","_this$state3","components_Header","components_GalleryFilters","components_Gallery","components_Spinner","autoFocus","components_Footer","ReactDOM","render","components_App","getElementById"],"mappings":"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","file":"static/js/main.7a0bc8f6.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport '../styles/header.css'\n\nconst headerButton = ({ onClick, enabled, name, icon }) => {\n  let classes = [`main-header__${name}`]\n  if (enabled) {\n    classes.push(`main-header__${name}--enabled`)\n  }\n  classes = classes.join(' ')\n  return (\n    <span\n      className={classes}\n      onClick={onClick}\n    ><span role=\"img\" aria-label=\"filters\">{icon}</span></span>\n  )\n}\n\nclass Header extends Component {\n  static defaultProps = {\n    loading: false,\n    username: null,\n    filters: {},\n    onSetUsername: () => {},\n    onEnableFilters: () => {},\n    enabled: false\n  }\n\n  state = {\n    username: '',\n    valid: false,\n    fullscreen: false,\n    enableFilters: false\n  }\n\n  componentDidMount () {\n    document.addEventListener('fullscreenchange', this._onFullscreenChange)\n  }\n\n  componentWillUnmount () {\n    document.removeEventListener('fullscreenchange', this._onFullscreenChange)\n  }\n\n  componentDidUpdate (prevProps) {\n    const { username } = this.props\n    if (username !== prevProps.username) {\n      this.setState({ username, valid: !!username })\n    }\n  }\n\n  render () {\n    const {\n      username,\n      valid,\n      fullscreen,\n      enableFilters\n    } = this.state\n    return (\n      <header className={this._getClasses()}>\n        {headerButton({\n          icon: 'üßê',\n          name: 'enable-filters',\n          enabled: enableFilters,\n          onClick: this._toggleEnableFilters\n        })}\n        {headerButton({\n          icon: 'üëì',\n          name: 'fullscreen',\n          enabled: fullscreen,\n          onClick: this._toggleFullScreen\n        })}\n        {valid &&\n          <div className=\"main-header__user\"  onClick={this._edit}>\n            <p className=\"main-header__user__name\">{username}</p>\n          </div>\n        }\n        {!valid &&\n          <input\n            name='username'\n            className=\"main-header__input\"\n            ref={ref => this.input = ref}\n            type=\"text\"\n            value={username}\n            placeholder=\"@username\"\n            onChange={this._handleChange}\n            onKeyPress={this._handleKey}\n            onBlur={this._handleBlur}\n          />\n        }\n      </header>\n    )\n  }\n\n  _getClasses = () => {\n    let classes = ['main-header']\n    if (this.props.loading) {\n      classes.push('main-header--loading')\n    }\n    if (this.props.enabled) {\n      classes.push('main-header--enabled')\n    }\n    return classes.join(' ')\n  }\n\n  _handleKey = event => {\n    if (event.key === 'Enter') {\n      this._setValid()\n    }\n  }\n\n  _handleBlur = () => {\n    if (this.state.username) {\n      this._setValid()\n    }\n  }\n\n  _handleChange = event => {\n    this.setState({ username: event.target.value.trim() })\n  }\n\n  _setValid = () => {\n    const valid = this.state.username !== ''\n    this.setState({ valid }, () => {\n      this.props.onSetUsername(this.state.username)\n    })\n  }\n\n  _edit = () => {\n    this.setState({ valid: false }, () => {\n      this.input.select()\n    })\n  }\n\n  _toggleFullScreen = () => {\n    this.setState({ fullscreen: !this.state.fullscreen }, () => {\n      if (this.state.fullscreen) {\n        document.body.requestFullscreen().catch(error => {\n          // console.log('error', error)\n        })\n      } else {\n        document.exitFullscreen().catch(error => {\n          // console.log('error', error)\n        })\n      }\n    })\n  }\n\n  _toggleEnableFilters = () => {\n    this.setState({ enableFilters: !this.state.enableFilters }, () => {\n      this.props.onEnableFilters(this.state.enableFilters)\n    })\n  }\n\n  _onFullscreenChange = () => {\n    const isFullScreen = document.fullscreen\n    this.setState({ fullscreen: isFullScreen })\n  }\n}\n\nexport default Header\n","import React, { Component } from 'react'\nimport '../styles/footer.css'\n\nclass Footer extends Component {\n  render () {\n    return (\n      <footer className=\"main-footer\">\n        <a className=\"main-footer__link\" href=\"https://github.com/thiagosf/insta-gallerify\">github</a>\n      </footer>\n    )\n  }\n}\n\nexport default Footer\n","import React, { Component } from 'react'\nimport numeral from 'numeral'\nimport '../styles/photo.css'\n\nclass Photo extends Component {\n  static defaultProps = {\n    url: '',\n    shortcode: '',\n    timestamp: '',\n    likes: 0,\n    favorite: false,\n    onFavorite: () => {}\n  }\n\n  render() {\n    const { url } = this.props\n    return (\n      <div className=\"photo\">\n        <div className=\"photo__info\">\n          <div className=\"photo__info__vertical-group\">\n            <span className={this._getFavoriteClasses()} onClick={this._toggleFavorite}>\n              <span className=\"photo__info__favorite__icon\" role=\"img\" aria-label=\"star\">‚≠êÔ∏è</span>\n            </span>\n            <span className=\"photo__info__likes\">\n              <span className=\"photo__info__likes__icon\" role=\"img\" aria-label=\"heart\">‚ù§Ô∏è</span> {this._friendlyLikes()}\n            </span>\n          </div>\n          <span className=\"photo__info__timestamp\">\n            {this._getDate()}\n          </span>\n          <a href={this._getLink()} target=\"_blank\" rel=\"noopener noreferrer\"  className=\"photo__info__link\">link</a>\n        </div>\n        <img src={url} alt='' />\n      </div>\n    )\n  }\n\n  _friendlyLikes = () => {\n    const { likes } = this.props\n    if (likes > 1000) {\n      return numeral(likes).format('0.0a')\n    }\n    return likes\n  }\n\n  _getLink = () => {\n    const { shortcode } = this.props\n    return `https://www.instagram.com/p/${shortcode}`\n  }\n\n  _getDate = () => {\n    const { timestamp } = this.props\n    return (new Date(+timestamp * 1000)).toLocaleString()\n  }\n\n  _getFavoriteClasses = () => {\n    let classes = ['photo__info__favorite']\n    if (this.props.favorite) {\n      classes.push('photo__info__favorite--active')\n    }\n    return classes.join(' ')\n  }\n\n  _toggleFavorite = () => {\n    this.props.onFavorite({\n      url: this.props.url,\n      shortcode: this.props.shortcode,\n      timestamp: this.props.timestamp,\n      likes: this.props.likes\n    })\n  }\n}\n\nexport default Photo\n","import React from 'react'\nimport LazyLoad from 'vanilla-lazyload'\n\nif (!document.lazyLoadInstance) {\n  document.lazyLoadInstance = new LazyLoad({\n    elements_selector: '.lazy'\n  })\n}\n\nexport class LazyImage extends React.Component {\n  componentDidMount() {\n    document.lazyLoadInstance.update()\n  }\n\n  componentDidUpdate() {\n    document.lazyLoadInstance.update()\n  }\n\n  render() {\n    const { alt, src, srcset, sizes, width, height, ...others } = this.props\n    let className = 'lazy'\n    if (others.className) {\n      className += ` ${others.className}`\n    }\n    return (\n      <img\n        {...others}\n        alt={alt}\n        className={className}\n        data-src={src}\n        data-srcset={srcset}\n        data-sizes={sizes}\n        width={width}\n        height={height}\n      />\n    )\n  }\n}\n\nexport default LazyImage\n","export default {\n  /**\n   * Fetch mock\n   * @returns {Promise.<object[]>}\n   */\n  fetchMock() {\n    const response = require('../mock/items.json')\n    const { edges } = response.graphql.user.edge_owner_to_timeline_media\n    return Promise.resolve(\n      edges\n        .filter(this.filterImages)\n        .map(this.buildImageItem)\n    )\n  },\n\n  /**\n   * Fetch user data\n   * @param {string} username\n   * @param {number} limit\n   * @returns {Promise.<object[]>}\n   */\n  fetchUser(username, limit = 50) {\n    if (username === 'mock') {\n      return this.fetchMock()\n    }\n    const url = `https://www.instagram.com/${username}/?__a=1`\n    return fetch(url)\n      .then(response => {\n        if (response.ok === false) {\n          throw new Error('We didn\\'t get API response. Please, try again.')\n        }\n        return response.json()\n      })\n      .then(result => {\n        const {\n          graphql: {\n            user: { is_private }\n          }\n        } = result\n\n        if (is_private) {\n          throw new Error('User profile is private.')\n        }\n\n        let promises = []\n        let images = []\n        if (result.graphql) {\n          const { id } = result.graphql.user\n          const {\n            edges,\n            count\n          } = result.graphql.user.edge_owner_to_timeline_media\n          const hasNextPage =\n            result.graphql.user.edge_owner_to_timeline_media.page_info\n              .has_next_page\n          const endCursor =\n            result.graphql.user.edge_owner_to_timeline_media.page_info\n              .end_cursor\n          const isPrivate = result.graphql.user.is_private\n          if (count > 0 && !isPrivate) {\n            images = edges\n              .filter(this.filterImages)\n              .map(this.buildImageItem)\n          }\n\n          if (hasNextPage) {\n            // @todo: get queryHash dynamic\n            const queryHash = 'f2405b236d85e8296cf30347c9f08c2a'\n            const first = 50\n            const maxPages = 20\n            let page = 1\n\n            const loop = endCursor => {\n              const query = {\n                query_hash: queryHash,\n                variables: `{\"id\":\"${id}\",\"first\":${first},\"after\":\"${endCursor}\"}`\n              }\n              const urlPagination = `https://www.instagram.com/graphql/query?query_hash=${query.query_hash}&variables=${query.variables}`\n              return fetch(urlPagination)\n                .then(response => {\n                  return response.json()\n                })\n                .then(result => {\n                  if (result.status === 'ok') {\n                    const {\n                      edges\n                    } = result.data.user.edge_owner_to_timeline_media\n                    const hasNextPage =\n                      result.data.user.edge_owner_to_timeline_media.page_info\n                        .has_next_page\n                    const endCursor =\n                      result.data.user.edge_owner_to_timeline_media.page_info\n                        .end_cursor\n\n                    edges\n                      .filter(this.filterImages)\n                      .forEach(item => {\n                        images.push(this.buildImageItem(item))\n                      })\n\n                    page++\n\n                    if (hasNextPage && page < maxPages) {\n                      if (images.length < +limit || +limit === 0) {\n                        return loop(endCursor)\n                      }\n                    }\n                  }\n                })\n                .catch(error => {\n                  console.log('pagination error:', error)\n                })\n            }\n\n            promises.push(loop(endCursor))\n          }\n        }\n        if (images.length === 0) {\n          throw new Error('User not found.')\n        }\n        return Promise.all(promises).then(() => {\n          return images\n        })\n      })\n      .catch(error => {\n        throw new Error(error)\n      })\n  },\n\n  /**\n   * Build image item\n   * @param {object} item\n   * @returns {object}\n   */\n  buildImageItem (item) {\n    let likes = 0\n    if (item.node.edge_liked_by) {\n      likes = +item.node.edge_liked_by.count\n    } else if (item.node.edge_media_preview_like) {\n      likes = item.node.edge_media_preview_like.count\n    }\n    return {\n      url: item.node.display_url,\n      thumbnail_url: item.node.thumbnail_src,\n      shortcode: item.node.shortcode,\n      timestamp: item.node.taken_at_timestamp,\n      likes\n    }\n  },\n\n  /**\n   * Filter images\n   * @param {object} item\n   * @returns {bool}\n   */\n  filterImages (item) {\n    return item.node && item.node.is_video === false\n  }\n}\n","import _ from 'lodash'\n\nexport default {\n  /**\n   * Filter images by sort and limit\n   * @param {object} options\n   * @param {string} options.sort\n   * @param {number} options.limit\n   * @returns {object[]}\n   */\n  filterImages ({ images, sort, limit }) {\n    let filteredImages = [].concat(images)\n    if (sort === 'likes') {\n      filteredImages = _.sortBy(filteredImages, 'likes').reverse()\n    } else if (sort === 'oldest') {\n      filteredImages = filteredImages.reverse()\n    }\n    if (limit > 0) {\n      filteredImages = filteredImages.slice(0, limit)\n    }\n    return filteredImages\n  },\n\n  /**\n   * Adiciona favorito\n   * @param {object} photo\n   */\n  toggleFavorite (photo) {\n    let favorites = this.getFavorites()\n    const favorite = favorites.find(item => item.url === photo.url)\n    if (!favorite) {\n      favorites.push(photo)\n    } else {\n      favorites = favorites.filter(item => item.url !== photo.url)\n    }\n\n    favorites = JSON.stringify(favorites)\n    localStorage.setItem('favorites', favorites)\n  },\n\n  /**\n   * Verifica se √© favorito\n   * @param {object} photo\n   * @param {boolean}\n   */\n  isFavorite (photo) {\n    let favorites = this.getFavorites()\n    const favorite = favorites.find(item => item.url === photo.url)\n    return favorite !== undefined\n  },\n\n  /**\n   * Resgata favoritos\n   * @returns {object[]}\n   */\n  getFavorites () {\n    let favorites = localStorage.getItem('favorites')\n    if (favorites) {\n      favorites = JSON.parse(favorites)\n    } else {\n      favorites = []\n    }\n    return favorites\n  }\n}\n","import React, { Component } from 'react'\nimport Slider from 'react-slick'\nimport Photo from './Photo'\nimport LazyImage from './LazyImage'\nimport { imageUtils } from '../utils'\nimport '../styles/gallery.css'\n\nclass Gallery extends Component {\n  static defaultProps = {\n    filters: {},\n    images: [],\n    onFavorite: () => {},\n    onSelectImage: () => {},\n    thumbView: false\n  }\n\n  state = {\n    loaded: [],\n    thumbViewScrollTop: 0,\n    showThumbView: true,\n    selected: null\n  }\n\n  componentDidUpdate (prevProps) {\n    if (\n      this.props.images.length !== prevProps.images.length ||\n      this.props.filters !== prevProps.filters\n    ) {\n      if (this.slider) {\n        this.slider.slickGoTo(0)\n      }\n    }\n    if (prevProps.thumbView !== this.props.thumbView) {\n      if (this.props.thumbView) {\n        this._setThumbViewScrollTop()\n        setTimeout(() => {\n          document.querySelector('.gallery-thumb-view').addEventListener('scroll', this._onScrollChange)\n        }, 1000)\n      }\n    }\n  }\n\n  render() {\n    const { images, thumbView } = this.props\n    const settings = {\n      dots: false,\n      infinite: true,\n      speed: 500,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      variableWidth: false,\n      accessibility: true,\n      lazyLoad: 'ondemand'\n    }\n    if (images.length === 0) {\n      return false\n    }\n    if (thumbView) {\n      return this._getThumbView()\n    }\n    const slides = images.map((image, index) => {\n      return (\n        <Photo\n          key={index}\n          url={image.url}\n          shortcode={image.shortcode}\n          timestamp={image.timestamp}\n          favorite={image.favorite}\n          likes={image.likes}\n          onFavorite={this._onFavorite}\n        />\n      )\n    })\n    return (\n      <Slider\n        ref={ref => this.slider = ref}\n        {...settings}\n      >\n        {slides}\n      </Slider>\n    )\n  }\n\n  goTo (index) {\n    this.slider.slickGoTo(index, true)\n  }\n\n  _onFavorite = photo => {\n    imageUtils.toggleFavorite(photo)\n    this.props.onFavorite(photo)\n  }\n\n  _getThumbView = () => {\n    const { selected } = this.state\n    const classes = this._getClassesThumbView()\n    let loaded = [...this.state.loaded]\n    return (\n      <div className={classes}>\n        <div className=\"gallery-thumb-view__wrapper\">\n          {this.props.images.map((item, index) => {\n            let classes = ['gallery-thumb-view__item']\n            if (loaded.includes(item.shortcode)) {\n              classes.push('gallery-thumb-view__item--loaded')\n            }\n            if (item.shortcode === selected) {\n              classes.push('gallery-thumb-view__item--selected')\n            }\n            classes = classes.join(' ')\n            return (\n              <div key={`${index}-${item.shortcode}`} className={classes}>\n                <LazyImage\n                  className=\"gallery-thumb-view__item__image\"\n                  src={item.thumbnail_url}\n                  alt={item.shortcode}\n                  onClick={() => {\n                    this.setState({ selected: item.shortcode }, () => {\n                      this.props.onSelectImage(index)\n                    })\n                  }}\n                  onLoad={() => {\n                    loaded.push(item.shortcode)\n                    this.setState({ loaded })\n                  }}\n                />\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n\n  _onScrollChange = event => {\n    const top = document.querySelector('.gallery-thumb-view').scrollTop\n    this.setState({ thumbViewScrollTop: top })\n  }\n\n  _setThumbViewScrollTop = () => {\n    const endTop = this.state.thumbViewScrollTop\n    const el = document.querySelector('.gallery-thumb-view')\n    let showThumbView = true\n    if (endTop > 0) {\n      showThumbView = false\n    }\n    this.setState({ showThumbView }, () => {\n      setTimeout(() => {\n        el.scrollTop = endTop\n        this.setState({ showThumbView: true })\n      }, 200)\n    })\n  }\n\n  _getClassesThumbView = () => {\n    let classes = ['gallery-thumb-view']\n    if (this.state.showThumbView) {\n      classes.push('gallery-thumb-view--enabled')\n    }\n    return classes.join(' ')\n  }\n}\n\nexport default Gallery\n","import React, { Component } from 'react'\n\nclass GalleryFilter extends Component {\n  static defaultProps = {\n    onChange: () => {},\n    selected: null,\n    values: []\n  }\n\n  render () {\n    return (\n      <div className=\"gallery-filters__filter\">\n        {this._getItems()}\n      </div>\n    )\n  }\n\n  _getItems = () => {\n    const { values, selected } = this.props\n    return values.map((item, index) => {\n      let classes = ['gallery-filters__filter__value']\n      if (item.value === selected) {\n        classes.push('gallery-filters__filter__value--active')\n      }\n      return (\n        <span\n          key={index}\n          className={classes.join(' ')}\n          onClick={() => this.props.onChange(item.value)}\n        >{item.label}</span>\n      )\n    })\n  }\n}\n\nexport default GalleryFilter\n","import React, { Component } from 'react'\nimport GalleryFilter from './GalleryFilter'\nimport '../styles/gallery_filters.css'\n\nclass GalleryFilters extends Component {\n  static defaultProps = {\n    loading: false,\n    onChange: () => {},\n    filters: {},\n    enabled: null\n  }\n\n  render () {\n    return (\n      <div className={this._getClasses()}>\n        {this._getSortFilters()}\n        {this._getLimitFilters()}\n        {this._getModeFilters()}\n      </div>\n    )\n  }\n\n  _getClasses = () => {\n    let classes = ['gallery-filters']\n    if (this.props.loading) {\n      classes.push('gallery-filters--loading')\n    }\n    if (this.props.enabled) {\n      classes.push('gallery-filters--enabled')\n    }\n    return classes.join(' ')\n  }\n\n  _getSortFilters = () => {\n    const { sort = 'recent' } = this.props.filters\n    const values = [{\n      value: 'likes',\n      label: 'likes'\n    }, {\n      value: 'recent',\n      label: 'recent'\n    }, {\n      value: 'oldest',\n      label: 'oldest'\n    }]\n    return (\n      <GalleryFilter\n        selected={sort}\n        values={values}\n        onChange={value => this._onChangeFilter('sort', value)}\n      />\n    )\n  }\n\n  _getLimitFilters = () => {\n    const { limit = 50 } = this.props.filters\n    const values = [{\n      value: 10,\n      label: 10\n    }, {\n      value: 50,\n      label: 50\n    }, {\n      value: 0,\n      label: 'all'\n    }]\n    return (\n      <GalleryFilter\n        selected={limit}\n        values={values}\n        onChange={value => this._onChangeFilter('limit', value)}\n      />\n    )\n  }\n\n  _getModeFilters = () => {\n    const { mode = 'gallery' } = this.props.filters\n    const values = [{\n      value: 'gallery',\n      label: 'gallery'\n    }, {\n      value: 'thumb',\n      label: 'thumb'\n    }]\n    return (\n      <GalleryFilter\n        selected={mode}\n        values={values}\n        onChange={value => this._onChangeFilter('mode', value)}\n      />\n    )\n  }\n\n  _onChangeFilter = (name, value) => {\n    this.props.onChange(name, value)\n  }\n}\n\nexport default GalleryFilters\n","import React, { Component } from 'react'\nimport '../styles/spinner.css'\n\nclass Spinner extends Component {\n  render () {\n    return (\n      <div className=\"spinner\">\n        <span className=\"spinner__circle\"></span>\n      </div>\n    )\n  }\n}\n\nexport default Spinner\n","import React, { Component } from 'react'\nimport Header from './Header'\nimport Footer from './Footer'\nimport Gallery from './Gallery'\nimport GalleryFilters from './GalleryFilters'\nimport Spinner from './Spinner'\nimport { api, imageUtils } from '../utils'\nimport '../styles/app.css'\n\nclass App extends Component {\n  state = {\n    username: null,\n    tempUsername: null,\n    images: [],\n    filters: {},\n    favorites: [],\n    showThumbs: false,\n    loading: false,\n    error: null,\n    lastLimit: 50,\n    enabledFilters: false,\n    exampleUsers: [\n      'angrymikko',\n      'jaromvogel',\n      'zatransis',\n      'rebeccamillsdraws',\n      '‚≠êÔ∏è'\n    ]\n  }\n\n  componentDidMount () {\n    if (window.location.hash) {\n      this._checkUsernameInHash(window.location.hash)\n    }\n    window.addEventListener('hashchange', this._onHashChange)\n  }\n\n  render () {\n    const {\n      username,\n      images,\n      loading,\n      error,\n      enabledFilters\n    } = this.state\n    return (\n      <div className=\"app\">\n        <Header\n          loading={loading}\n          filters={this.state.filters}\n          username={username}\n          onSetUsername={this._onSetUsername}\n          onEnableFilters={this._onEnableFilters}\n          enabled={!!username}\n        />\n        <GalleryFilters\n          loading={loading}\n          filters={this.state.filters}\n          onChange={this._onFilter}\n          enabled={enabledFilters}\n        />\n        {!loading &&\n          <Gallery\n            ref={ref => this.gallery = ref}\n            filters={this.state.filters}\n            images={this._galleryImages()}\n            onFavorite={this._onFavorite}\n            thumbView={this.state.filters.mode === 'thumb'}\n            onSelectImage={this._onSelectImage}\n          />\n        }\n        {loading &&\n          <Spinner />\n        }\n        {images.length === 0 && !loading &&\n          <div className=\"app__start\">\n            {error &&\n              <p className=\"app__start__error\">{error}</p>\n            }\n            <div className=\"app__start__input-box\">\n              <input\n                autoFocus\n                placeholder=\"@username\"\n                className=\"app__start__input-box__input\"\n                onChange={this._onChanageInput}\n                onKeyPress={this._onKeyPressInput}\n              />\n            </div>\n            <p className=\"app__start__example\">Examples:</p>\n            <ul className=\"app__start__example-users\">\n              {this._getExampleUsers()}\n            </ul>\n          </div>\n        }\n        <Footer />\n      </div>\n    )\n  }\n\n  _onSetUsername = (username, params = null) => {\n    let filters = {\n      ...this.state.filters\n    }\n    if (params) {\n      params.split(',').forEach(item => {\n        const parts = item.split(':')\n        const name = parts[0]\n        let value = parts[1]\n        if (name === 'limit') {\n          value = +value\n        }\n        filters[name] = value\n      })\n    }\n    this.setState({ filters }, () => {\n      const formatedParams = params ? `?${params}` : ''\n      if (username) {\n        if (username === '‚≠êÔ∏è' || username === 'favorites') {\n          window.history.pushState({}, 'username_favorites', `#/@favorites${formatedParams}`)\n          document.title = `favorites / Insta Gallerify`\n          const images = imageUtils.getFavorites()\n          if (images.length > 0) {\n            this.setState({ username, images })\n          } else {\n            this.setState({\n              error: 'You have no favorites yet!',\n              username: '',\n              images: []\n            })\n          }\n        } else {\n          window.history.pushState({}, `username_${username}`, `#/@${username}${formatedParams}`)\n          document.title = `@${username} / Insta Gallerify`\n          const lastLimit = this.state.filters.limit || this.state.lastLimit || 50\n          if (username !== this.state.username) {\n            this.setState({ loading: true, lastLimit }, () => {\n              return this._loadData(username, this.state.filters.limit)\n            })\n          }\n        }\n      } else {\n        this.setState({ username: '', images: [] })\n      }\n    })\n  }\n\n  _loadData = (username, limit) => {\n    return api.fetchUser(username, limit).then(images => {\n      this.setState({ username, images })\n    }).catch(error => {\n      this.setState({\n        error: error.message,\n        username: '',\n        images: []\n      })\n    }).finally(() => {\n      this.setState({ loading: false })\n    })\n  }\n\n  _galleryImages = () => {\n    let list = []\n    const { images, filters } = this.state\n    if (images.length > 0) {\n      list = imageUtils.filterImages({ images, ...filters })\n    }\n    list = list.map(photo => {\n      return {\n        ...photo,\n        favorite: imageUtils.isFavorite(photo)\n      }\n    })\n    return list\n  }\n\n  _onFilter = (name, value) => {\n    const filters = {\n      ...this.state.filters,\n      [name]: value\n    }\n    this.setState({ filters }, () => {\n      this._changeFiltersInURL()\n      if (\n        this.state.lastLimit > 0 &&\n        (\n          this.state.lastLimit < filters.limit ||\n          (this.state.lastLimit !== 0 && filters.limit === 0)\n        )\n      ) {\n        const lastLimit = filters.limit\n        this.setState({ loading: true, lastLimit }, () => {\n          this._loadData(this.state.username, lastLimit)\n        })\n      }\n    })\n  }\n\n  _getExampleUsers = () => {\n    const { exampleUsers } = this.state\n    return exampleUsers.map((username, index) => {\n      return (\n        <li key={index}>\n          <span\n            onClick={() => this._onSetUsername(username)}\n          >{username}</span>\n        </li>\n      )\n    })\n  }\n\n  _checkUsernameInHash = hash => {\n    const parts = hash.split('@')\n    if (parts.length > 0) {\n      const [username, params] = parts[1].split('?')\n      this._onSetUsername(username, params)\n    }\n  }\n\n  _onHashChange = event => {\n    this._checkUsernameInHash(event.newURL)\n  }\n\n  _onFavorite = photo => {\n    const images = this.state.images.map(item => {\n      if (item.url === photo.url) {\n        item.favorite = !item.favorite\n      }\n      return item\n    })\n    this.setState({ images })\n  }\n\n  _onSelectImage = index => {\n    const filters = {\n      ...this.state.filters,\n      mode: 'gallery'\n    }\n    this.setState({ filters }, () => {\n      this.gallery.goTo(index)\n    })\n  }\n\n  _onEnableFilters = value => {\n    this.setState({ enabledFilters: value })\n  }\n\n  _changeFiltersInURL = () => {\n    const { username, filters } = this.state\n    let formatedParams = []\n    for (let param in filters) {\n      const value = filters[param]\n      formatedParams.push(`${param}:${value}`)\n    }\n    formatedParams = formatedParams.join(',')\n    if (formatedParams) {\n      formatedParams = `?${formatedParams}`\n    }\n    window.history.pushState({}, 'username_favorites', `#/@${username}${formatedParams}`)\n  }\n\n  _onChanageInput = event => {\n    this.setState({\n      tempUsername: event.target.value.trim()\n    })\n  }\n\n  _onKeyPressInput = event => {\n    if (event.key === 'Enter') {\n      this._setValid()\n    }\n  }\n\n  _setValid = () => {\n    this._onSetUsername(this.state.tempUsername)\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './styles/index.css';\nimport '../node_modules/slick-carousel/slick/slick.css';\nimport '../node_modules/slick-carousel/slick/slick-theme.css';\n\nimport App from './components/App';\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}