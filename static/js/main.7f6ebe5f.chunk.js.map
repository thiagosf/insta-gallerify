{"version":3,"sources":["components/Header.js","components/Photo.js","components/Gallery.js","components/GalleryFilter.js","components/GalleryFilters.js","utils/api.js","utils/image_utils.js","components/App.js","index.js"],"names":["Header","state","username","valid","_handleKey","event","key","_this","_setValid","_handleBlur","_handleChange","setState","target","value","props","onSetUsername","_edit","input","select","_this2","this","_this$state","react_default","a","createElement","className","onClick","name","ref","type","placeholder","onChange","onKeyPress","onBlur","Component","Photo","_friendlyLikes","likes","numeral","format","_getLink","shortcode","concat","_getDate","timestamp","Date","toLocaleString","url","role","aria-label","href","rel","src","alt","defaultProps","Gallery","images","length","slides","map","image","index","components_Photo","lib_default","dots","infinite","speed","slidesToShow","slidesToScroll","variableWidth","accessibility","GalleryFilter","_getItems","_this$props","values","selected","item","classes","push","join","label","GalleryFilters","sort","limit","_getSortFilters","components_GalleryFilter","_onChangeFilter","_getLimitFilters","Object","defineProperty","filters","api","fetchUser","fetch","then","response","json","result","graphql","_result$graphql$user$","user","edge_owner_to_timeline_media","edges","count","node","display_url","taken_at_timestamp","edge_liked_by","image_utils","filterImages","_ref","filteredImages","_","sortBy","reverse","slice","App","favorites","showThumbs","_onSetUsername","_galleryImages","list","imageUtils","objectSpread","_onFilter","console","log","components_Header","components_GalleryFilters","components_Gallery","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.7f6ebe5f.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport '../styles/header.css'\n\nclass Header extends Component {\n  state = {\n    username: '',\n    valid: false\n  };\n\n  render () {\n    const { username, valid } = this.state\n    return (\n      <header className=\"main-header\">\n        {valid &&\n          <div className=\"main-header__user\"  onClick={this._edit}>\n            <p className=\"main-header__user__name\">{username}</p>\n          </div>\n        }\n        {!valid &&\n          <input\n            name='username'\n            className=\"main-header__input\"\n            ref={ref => this.input = ref}\n            type=\"text\"\n            value={username}\n            placeholder=\"@username\"\n            onChange={this._handleChange}\n            onKeyPress={this._handleKey}\n            onBlur={this._handleBlur}\n          />\n        }\n      </header>\n    )\n  };\n\n  _handleKey = event => {\n    if (event.key === 'Enter') {\n      this._setValid()\n    }\n  };\n\n  _handleBlur = () => {\n    if (this.state.username) {\n      this._setValid()\n    }\n  };\n\n  _handleChange = event => {\n    this.setState({ username: event.target.value })\n  };\n\n  _setValid = () => {\n    this.setState({ valid: true }, () => {\n      this.props.onSetUsername(this.state.username)\n    })\n  };\n\n  _edit = () => {\n    this.setState({ valid: false }, () => {\n      this.input.select()\n    })\n  }\n}\n\nexport default Header\n","import React, { Component } from 'react'\nimport numeral from 'numeral'\nimport '../styles/photo.css'\n\nclass Photo extends Component {\n  static defaultProps = {\n    url: '',\n    shortcode: '',\n    timestamp: '',\n    likes: 0\n  };\n\n  render() {\n    const { url } = this.props\n    return (\n      <div className=\"photo\">\n        <div className=\"photo__info\">\n          <span className=\"photo__info__likes\">\n            <span className=\"photo__info__likes__icon\" role=\"img\" aria-label=\"heart\">❤️</span> {this._friendlyLikes()}\n          </span>\n          <span className=\"photo__info__timestamp\">\n            {this._getDate()}\n          </span>\n          <a href={this._getLink()} target=\"_blank\" rel=\"noopener noreferrer\"  className=\"photo__info__link\">link</a>\n        </div>\n        <img src={url} alt='' />\n      </div>\n    )\n  };\n\n  _friendlyLikes = () => {\n    const { likes } = this.props\n    return numeral(likes).format('0.0a')\n  };\n\n  _getLink = () => {\n    const { shortcode } = this.props\n    return `https://www.instagram.com/p/${shortcode}`\n  };\n\n  _getDate = () => {\n    const { timestamp } = this.props\n    return (new Date(+timestamp * 1000)).toLocaleString()\n  };\n}\n\nexport default Photo\n","import React, { Component } from 'react'\nimport Slider from 'react-slick'\nimport Photo from './Photo'\nimport '../styles/gallery.css'\n\nclass Gallery extends Component {\n  static defaultProps = {\n    images: []\n  };\n\n  render() {\n    const settings = {\n      dots: false,\n      infinite: true,\n      speed: 500,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      variableWidth: false,\n      accessibility: true\n    }\n\n    const { images } = this.props\n    if (images.length === 0) {\n      return false\n    }\n    const slides = images.map((image, index) => {\n      return (\n        <Photo\n          key={index}\n          url={image.url}\n          shortcode={image.shortcode}\n          timestamp={image.timestamp}\n          likes={image.likes}\n        />\n      )\n    })\n\n    return (\n      <Slider {...settings}>\n        {slides}\n      </Slider>\n    )\n  }\n}\n\nexport default Gallery\n","import React, { Component } from 'react'\n\nclass GalleryFilter extends Component {\n  static defaultProps = {\n    onChange: () => {},\n    selected: null,\n    values: []\n  };\n\n  render () {\n    return (\n      <div className=\"gallery-filters__filter\">\n        {this._getItems()}\n      </div>\n    )\n  };\n\n  _getItems = () => {\n    const { values, selected } = this.props\n    return values.map((item, index) => {\n      let classes = ['gallery-filters__filter__value']\n      if (item.value === selected) {\n        classes.push('gallery-filters__filter__value--active')\n      }\n      return (\n        <span\n          key={index}\n          className={classes.join(' ')}\n          onClick={() => this.props.onChange(item.value)}\n        >{item.label}</span>\n      )\n    })\n  };\n}\n\nexport default GalleryFilter\n","import React, { Component } from 'react'\nimport GalleryFilter from './GalleryFilter'\nimport '../styles/gallery_filters.css'\n\nclass GalleryFilters extends Component {\n  static defaultProps = {\n    onChange: () => {},\n    filters: {}\n  };\n\n  state = {\n    sort: 'recent',\n    limit: 30\n  };\n\n  render () {\n    return (\n      <div className=\"gallery-filters\">\n        {this._getSortFilters()}\n        {this._getLimitFilters()}\n      </div>\n    )\n  };\n\n  _getSortFilters = () => {\n    const { sort } = this.state\n    const values = [{\n      value: 'recent',\n      label: 'recent'\n    }, {\n      value: 'likes',\n      label: 'likes'\n    }]\n    return (\n      <GalleryFilter\n        selected={sort}\n        values={values}\n        onChange={value => this._onChangeFilter('sort', value)}\n      />\n    )\n  };\n\n  _getLimitFilters = () => {\n    const { limit } = this.state\n    const values = [{\n      value: 30,\n      label: 30\n    }, {\n      value: 70,\n      label: 70\n    }, {\n      value: 0,\n      label: 'all'\n    }]\n    return (\n      <GalleryFilter\n        selected={limit}\n        values={values}\n        onChange={value => this._onChangeFilter('limit', value)}\n      />\n    )\n  };\n\n  _onChangeFilter = (name, value) => {\n    this.setState({ [name]: value }, () => {\n      this.props.onChange(this.state)\n    })\n  };\n}\n\nexport default GalleryFilters\n","export default {\n  /**\n   * Fetch user data\n   * @param {string} username\n   * @returns {Promise.<object[]>}\n   */\n  fetchUser (username) {\n    const url = `https://www.instagram.com/${username}/?__a=1`\n    return fetch(url).then(response => {\n      return response.json()\n    }).then(result => {\n      let images = []\n      if (result.graphql) {\n        const { edges, count } = result.graphql.user.edge_owner_to_timeline_media\n        if (count > 0) {\n          images = edges.map(item => {\n            return {\n              url: item.node.display_url,\n              shortcode: item.node.shortcode,\n              timestamp: item.node.taken_at_timestamp,\n              likes: +item.node.edge_liked_by.count\n            }\n          })\n        }\n      }\n      return images\n    })\n  }\n}\n","import _ from 'lodash'\n\nexport default {\n  /**\n   * Filter images by sort and limit\n   * @param {object} options\n   * @param {string} options.sort\n   * @param {number} options.limit\n   * @returns {object[]}\n   */\n  filterImages ({ images, sort, limit }) {\n    let filteredImages = [].concat(images)\n    if (sort === 'likes') {\n      filteredImages = _.sortBy(filteredImages, 'likes').reverse()\n    }\n    if (limit > 0) {\n      filteredImages = filteredImages.slice(0, limit)\n    }\n    return filteredImages\n  }\n}\n","import React, { Component } from 'react'\nimport Header from './Header'\nimport Gallery from './Gallery'\nimport GalleryFilters from './GalleryFilters'\nimport { api, imageUtils } from '../utils'\nimport '../styles/app.css'\n\nclass App extends Component {\n  state = {\n    images: [],\n    filters: {},\n    favorites: [],\n    showThumbs: false\n  };\n\n  render () {\n    const { images } = this.state\n    return (\n      <div className=\"app\">\n        <Header\n          onSetUsername={this._onSetUsername}\n        />\n        <GalleryFilters\n          filters={this.state.filters}\n          onChange={this._onFilter}\n        />\n        <Gallery images={this._galleryImages()} />\n        {images.length === 0 &&\n          <p className=\"app__start-message\">Fill the username <span role=\"img\" aria-label=\"point_up\">☝️</span></p>\n        }\n      </div>\n    )\n  };\n\n  _onSetUsername = username => {\n    return api.fetchUser(username).then(images => {\n      this.setState({ images })\n    })\n  };\n\n  _galleryImages = () => {\n    let list = []\n    const { images, filters } = this.state\n    if (images.length > 0) {\n      list = imageUtils.filterImages({ images, ...filters })\n    }\n    return list\n  };\n\n  _onFilter = filters => {\n    console.log('filters', filters)\n    this.setState({ filters })\n  };\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './styles/index.css';\nimport '../node_modules/slick-carousel/slick/slick.css';\nimport '../node_modules/slick-carousel/slick/slick-theme.css';\n\nimport App from './components/App';\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}