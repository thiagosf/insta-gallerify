{"version":3,"sources":["components/Header.js","components/Footer.js","components/Photo.js","components/LazyImage.js","utils/api.js","utils/image_utils.js","components/Gallery.js","components/GalleryFilter.js","components/GalleryFilters.js","components/Spinner.js","components/App.js","index.js"],"names":["Header","state","username","valid","fullscreen","_getClasses","classes","_this","props","loading","push","join","_handleKey","event","key","_setValid","_handleBlur","_handleChange","setState","target","value","trim","onSetUsername","_edit","input","select","_toggleFullScreen","document","body","requestFullscreen","exitFullscreen","prevProps","_this2","this","_this3","_this$state","react_default","a","createElement","className","onClick","role","aria-label","autoFocus","name","ref","type","placeholder","onChange","onKeyPress","onBlur","Component","defaultProps","Footer","href","Photo","_friendlyLikes","likes","numeral","format","_getLink","shortcode","concat","_getDate","timestamp","Date","toLocaleString","_getFavoriteClasses","favorite","_toggleFavorite","onFavorite","url","rel","src","alt","lazyLoadInstance","LazyLoad","elements_selector","LazyImage","_React$Component","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","update","_this$props","srcset","sizes","width","height","others","objectWithoutProperties","assign","data-src","data-srcset","data-sizes","React","api","fetchMock","edges","require","graphql","user","edge_owner_to_timeline_media","Promise","resolve","map","buildImageItem","fetchUser","limit","length","undefined","fetch","then","response","ok","Error","json","result","is_private","promises","images","id","_result$graphql$user$","count","hasNextPage","page_info","has_next_page","endCursor","end_cursor","isPrivate","page","loop","query","query_hash","variables","urlPagination","status","data","forEach","item","catch","error","console","log","all","node","edge_liked_by","edge_media_preview_like","display_url","thumbnail_url","thumbnail_src","taken_at_timestamp","image_utils","filterImages","_ref","sort","filteredImages","_","sortBy","reverse","slice","toggleFavorite","photo","favorites","getFavorites","find","filter","JSON","stringify","localStorage","setItem","isFavorite","getItem","parse","Gallery","loaded","_onFavorite","imageUtils","_getThumbView","toConsumableArray","index","includes","components_LazyImage","onSelectImage","onLoad","filters","slider","slickGoTo","thumbView","slides","image","components_Photo","lib_default","dots","infinite","speed","slidesToShow","slidesToScroll","variableWidth","accessibility","lazyLoad","GalleryFilter","_getItems","values","selected","label","GalleryFilters","_getSortFilters","_this$props$filters$s","components_GalleryFilter","_onChangeFilter","_getLimitFilters","_this$props$filters$l","_getModeFilters","_this$props$filters$m","mode","Spinner","App","showThumbs","lastLimit","exampleUsers","_onSetUsername","window","history","pushState","title","_loadData","message","finally","_galleryImages","list","_objectSpread","_onFilter","defineProperty","_getExampleUsers","_checkUsernameInHash","hash","parts","split","_onHashChange","newURL","_onSelectImage","gallery","goTo","location","addEventListener","_this$state2","components_Header","components_GalleryFilters","components_Gallery","components_Spinner","components_Footer","ReactDOM","render","components_App","getElementById"],"mappings":"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","file":"static/js/main.670f4987.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport '../styles/header.css'\n\nclass Header extends Component {\n  static defaultProps = {\n    loading: false,\n    username: null,\n    onSetUsername: () => {}\n  }\n\n  state = {\n    username: '',\n    valid: false,\n    fullscreen: false\n  }\n\n  componentDidUpdate (prevProps) {\n    const { username } = this.props\n    if (username !== prevProps.username) {\n      this.setState({ username }, () => {\n        this._setValid()\n      })\n    }\n  }\n\n  render () {\n    const { username, valid } = this.state\n    return (\n      <header className={this._getClasses()}>\n        <span className=\"main-header__fullscreen\" onClick={this._toggleFullScreen}><span role=\"img\" aria-label=\"eyeglasses\">👓</span></span>\n        {valid &&\n          <div className=\"main-header__user\"  onClick={this._edit}>\n            <p className=\"main-header__user__name\">{username}</p>\n          </div>\n        }\n        {!valid &&\n          <input\n            autoFocus\n            name='username'\n            className=\"main-header__input\"\n            ref={ref => this.input = ref}\n            type=\"text\"\n            value={username}\n            placeholder=\"@username\"\n            onChange={this._handleChange}\n            onKeyPress={this._handleKey}\n            onBlur={this._handleBlur}\n          />\n        }\n      </header>\n    )\n  }\n\n  _getClasses = () => {\n    let classes = ['main-header']\n    if (this.props.loading) {\n      classes.push('main-header--loading')\n    }\n    return classes.join(' ')\n  }\n\n  _handleKey = event => {\n    if (event.key === 'Enter') {\n      this._setValid()\n    }\n  }\n\n  _handleBlur = () => {\n    if (this.state.username) {\n      this._setValid()\n    }\n  }\n\n  _handleChange = event => {\n    this.setState({ username: event.target.value.trim() })\n  }\n\n  _setValid = () => {\n    const valid = this.state.username !== ''\n    this.setState({ valid }, () => {\n      this.props.onSetUsername(this.state.username)\n    })\n  }\n\n  _edit = () => {\n    this.setState({ valid: false }, () => {\n      this.input.select()\n    })\n  }\n\n  _toggleFullScreen = () => {\n    this.setState({ fullscreen: !this.state.fullscreen }, () => {\n      if (this.state.fullscreen) {\n        document.body.requestFullscreen()\n      } else {\n        document.exitFullscreen()\n      }\n    })\n  }\n}\n\nexport default Header\n","import React, { Component } from 'react'\nimport '../styles/footer.css'\n\nclass Footer extends Component {\n  render () {\n    return (\n      <footer className=\"main-footer\">\n        <a className=\"main-footer__link\" href=\"https://github.com/thiagosf/insta-gallerify\">github</a>\n      </footer>\n    )\n  }\n}\n\nexport default Footer\n","import React, { Component } from 'react'\nimport numeral from 'numeral'\nimport '../styles/photo.css'\n\nclass Photo extends Component {\n  static defaultProps = {\n    url: '',\n    shortcode: '',\n    timestamp: '',\n    likes: 0,\n    favorite: false,\n    onFavorite: () => {}\n  }\n\n  render() {\n    const { url } = this.props\n    return (\n      <div className=\"photo\">\n        <div className=\"photo__info\">\n          <div className=\"photo__info__vertical-group\">\n            <span className={this._getFavoriteClasses()} onClick={this._toggleFavorite}>\n              <span className=\"photo__info__favorite__icon\" role=\"img\" aria-label=\"star\">⭐️</span>\n            </span>\n            <span className=\"photo__info__likes\">\n              <span className=\"photo__info__likes__icon\" role=\"img\" aria-label=\"heart\">❤️</span> {this._friendlyLikes()}\n            </span>\n          </div>\n          <span className=\"photo__info__timestamp\">\n            {this._getDate()}\n          </span>\n          <a href={this._getLink()} target=\"_blank\" rel=\"noopener noreferrer\"  className=\"photo__info__link\">link</a>\n        </div>\n        <img src={url} alt='' />\n      </div>\n    )\n  }\n\n  _friendlyLikes = () => {\n    const { likes } = this.props\n    if (likes > 1000) {\n      return numeral(likes).format('0.0a')\n    }\n    return likes\n  }\n\n  _getLink = () => {\n    const { shortcode } = this.props\n    return `https://www.instagram.com/p/${shortcode}`\n  }\n\n  _getDate = () => {\n    const { timestamp } = this.props\n    return (new Date(+timestamp * 1000)).toLocaleString()\n  }\n\n  _getFavoriteClasses = () => {\n    let classes = ['photo__info__favorite']\n    if (this.props.favorite) {\n      classes.push('photo__info__favorite--active')\n    }\n    return classes.join(' ')\n  }\n\n  _toggleFavorite = () => {\n    this.props.onFavorite({\n      url: this.props.url,\n      shortcode: this.props.shortcode,\n      timestamp: this.props.timestamp,\n      likes: this.props.likes\n    })\n  }\n}\n\nexport default Photo\n","import React from 'react'\nimport LazyLoad from 'vanilla-lazyload'\n\nif (!document.lazyLoadInstance) {\n  document.lazyLoadInstance = new LazyLoad({\n    elements_selector: '.lazy'\n  })\n}\n\nexport class LazyImage extends React.Component {\n  componentDidMount() {\n    document.lazyLoadInstance.update()\n  }\n\n  componentDidUpdate() {\n    document.lazyLoadInstance.update()\n  }\n\n  render() {\n    const { alt, src, srcset, sizes, width, height, ...others } = this.props\n    let className = 'lazy'\n    if (others.className) {\n      className += ` ${others.className}`\n    }\n    return (\n      <img\n        {...others}\n        alt={alt}\n        className={className}\n        data-src={src}\n        data-srcset={srcset}\n        data-sizes={sizes}\n        width={width}\n        height={height}\n      />\n    )\n  }\n}\n\nexport default LazyImage\n","export default {\n  /**\n   * Fetch mock\n   * @returns {Promise.<object[]>}\n   */\n  fetchMock() {\n    const response = require('../mock/items.json')\n    const { edges } = response.graphql.user.edge_owner_to_timeline_media\n    return Promise.resolve(\n      edges.map(this.buildImageItem)\n    )\n  },\n\n  /**\n   * Fetch user data\n   * @param {string} username\n   * @param {number} limit\n   * @returns {Promise.<object[]>}\n   */\n  fetchUser(username, limit = 50) {\n    if (username === 'mock') {\n      return this.fetchMock()\n    }\n    const url = `https://www.instagram.com/${username}/?__a=1`\n    return fetch(url)\n      .then(response => {\n        if (response.ok === false) {\n          throw new Error('We didn\\'t get API response. Please, try again.')\n        }\n        return response.json()\n      })\n      .then(result => {\n        const {\n          graphql: {\n            user: { is_private }\n          }\n        } = result\n\n        if (is_private) {\n          throw new Error('User profile is private.')\n        }\n\n        let promises = []\n        let images = []\n        if (result.graphql) {\n          const { id } = result.graphql.user\n          const {\n            edges,\n            count\n          } = result.graphql.user.edge_owner_to_timeline_media\n          const hasNextPage =\n            result.graphql.user.edge_owner_to_timeline_media.page_info\n              .has_next_page\n          const endCursor =\n            result.graphql.user.edge_owner_to_timeline_media.page_info\n              .end_cursor\n          const isPrivate = result.graphql.user.is_private\n          if (count > 0 && !isPrivate) {\n            images = edges.map(this.buildImageItem)\n          }\n\n          if (hasNextPage) {\n            // @todo: get queryHash dynamic\n            const queryHash = 'f2405b236d85e8296cf30347c9f08c2a'\n            const first = 50\n            const maxPages = 20\n            let page = 1\n\n            const loop = endCursor => {\n              const query = {\n                query_hash: queryHash,\n                variables: `{\"id\":\"${id}\",\"first\":${first},\"after\":\"${endCursor}\"}`\n              }\n              const urlPagination = `https://www.instagram.com/graphql/query?query_hash=${query.query_hash}&variables=${query.variables}`\n              return fetch(urlPagination)\n                .then(response => {\n                  return response.json()\n                })\n                .then(result => {\n                  if (result.status === 'ok') {\n                    const {\n                      edges\n                    } = result.data.user.edge_owner_to_timeline_media\n                    const hasNextPage =\n                      result.data.user.edge_owner_to_timeline_media.page_info\n                        .has_next_page\n                    const endCursor =\n                      result.data.user.edge_owner_to_timeline_media.page_info\n                        .end_cursor\n\n                    edges.forEach(item => {\n                      images.push(this.buildImageItem(item))\n                    })\n\n                    page++\n\n                    if (hasNextPage && page < maxPages) {\n                      if (images.length < +limit || +limit === 0) {\n                        return loop(endCursor)\n                      }\n                    }\n                  }\n                })\n                .catch(error => {\n                  console.log('pagination error:', error)\n                })\n            }\n\n            promises.push(loop(endCursor))\n          }\n        }\n        if (images.length === 0) {\n          throw new Error('User not found.')\n        }\n        return Promise.all(promises).then(() => {\n          return images\n        })\n      })\n      .catch(error => {\n        throw new Error(error)\n      })\n  },\n\n  /**\n   * Build image item\n   * @param {object} item\n   * @returns {object}\n   */\n  buildImageItem (item) {\n    let likes = 0\n    if (item.node.edge_liked_by) {\n      likes = +item.node.edge_liked_by.count\n    } else if (item.node.edge_media_preview_like) {\n      likes = item.node.edge_media_preview_like.count\n    }\n    return {\n      url: item.node.display_url,\n      thumbnail_url: item.node.thumbnail_src,\n      shortcode: item.node.shortcode,\n      timestamp: item.node.taken_at_timestamp,\n      likes\n    }\n  }\n}\n","import _ from 'lodash'\n\nexport default {\n  /**\n   * Filter images by sort and limit\n   * @param {object} options\n   * @param {string} options.sort\n   * @param {number} options.limit\n   * @returns {object[]}\n   */\n  filterImages ({ images, sort, limit }) {\n    let filteredImages = [].concat(images)\n    if (sort === 'likes') {\n      filteredImages = _.sortBy(filteredImages, 'likes').reverse()\n    } else if (sort === 'oldest') {\n      filteredImages = filteredImages.reverse()\n    }\n    if (limit > 0) {\n      filteredImages = filteredImages.slice(0, limit)\n    }\n    return filteredImages\n  },\n\n  /**\n   * Adiciona favorito\n   * @param {object} photo\n   */\n  toggleFavorite (photo) {\n    let favorites = this.getFavorites()\n    const favorite = favorites.find(item => item.url === photo.url)\n    if (!favorite) {\n      favorites.push(photo)\n    } else {\n      favorites = favorites.filter(item => item.url !== photo.url)\n    }\n\n    favorites = JSON.stringify(favorites)\n    localStorage.setItem('favorites', favorites)\n  },\n\n  /**\n   * Verifica se é favorito\n   * @param {object} photo\n   * @param {boolean}\n   */\n  isFavorite (photo) {\n    let favorites = this.getFavorites()\n    const favorite = favorites.find(item => item.url === photo.url)\n    return favorite !== undefined\n  },\n\n  /**\n   * Resgata favoritos\n   * @returns {object[]}\n   */\n  getFavorites () {\n    let favorites = localStorage.getItem('favorites')\n    if (favorites) {\n      favorites = JSON.parse(favorites)\n    } else {\n      favorites = []\n    }\n    return favorites\n  }\n}\n","import React, { Component } from 'react'\nimport Slider from 'react-slick'\nimport Photo from './Photo'\nimport LazyImage from './LazyImage'\nimport { imageUtils } from '../utils'\nimport '../styles/gallery.css'\n\nclass Gallery extends Component {\n  static defaultProps = {\n    filters: {},\n    images: [],\n    onFavorite: () => {},\n    onSelectImage: () => {},\n    thumbView: false\n  }\n\n  state = {\n    loaded: []\n  }\n\n  componentDidUpdate (prevProps) {\n    if (\n      this.props.images.length !== prevProps.images.length ||\n      this.props.filters !== prevProps.filters\n    ) {\n      if (this.slider) {\n        this.slider.slickGoTo(0)\n      }\n    }\n  }\n\n  render() {\n    const { images, thumbView } = this.props\n    const settings = {\n      dots: false,\n      infinite: true,\n      speed: 500,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      variableWidth: false,\n      accessibility: true,\n      lazyLoad: 'ondemand'\n    }\n    if (images.length === 0) {\n      return false\n    }\n    if (thumbView) {\n      return this._getThumbView()\n    }\n    const slides = images.map((image, index) => {\n      return (\n        <Photo\n          key={index}\n          url={image.url}\n          shortcode={image.shortcode}\n          timestamp={image.timestamp}\n          favorite={image.favorite}\n          likes={image.likes}\n          onFavorite={this._onFavorite}\n        />\n      )\n    })\n    return (\n      <Slider\n        ref={ref => this.slider = ref}\n        {...settings}\n      >\n        {slides}\n      </Slider>\n    )\n  }\n\n  goTo (index) {\n    this.slider.slickGoTo(index, true)\n  }\n\n  _onFavorite = photo => {\n    imageUtils.toggleFavorite(photo)\n    this.props.onFavorite(photo)\n  }\n\n  _getThumbView = () => {\n    let loaded = [...this.state.loaded]\n    return (\n      <div className=\"gallery-thumb-view\">\n        <div className=\"gallery-thumb-view__wrapper\">\n          {this.props.images.map((item, index) => {\n            let classes = ['gallery-thumb-view__item']\n            if (loaded.includes(item.shortcode)) {\n              classes.push('gallery-thumb-view__item--loaded')\n            }\n            classes = classes.join(' ')\n            return (\n              <div key={index} className={classes}>\n                <LazyImage\n                  className=\"gallery-thumb-view__item__image\"\n                  src={item.thumbnail_url}\n                  alt={item.shortcode}\n                  onClick={() => {\n                    this.props.onSelectImage(index)\n                  }}\n                  onLoad={() => {\n                    loaded.push(item.shortcode)\n                    this.setState({ loaded })\n                  }}\n                />\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Gallery\n","import React, { Component } from 'react'\n\nclass GalleryFilter extends Component {\n  static defaultProps = {\n    onChange: () => {},\n    selected: null,\n    values: []\n  }\n\n  render () {\n    return (\n      <div className=\"gallery-filters__filter\">\n        {this._getItems()}\n      </div>\n    )\n  }\n\n  _getItems = () => {\n    const { values, selected } = this.props\n    return values.map((item, index) => {\n      let classes = ['gallery-filters__filter__value']\n      if (item.value === selected) {\n        classes.push('gallery-filters__filter__value--active')\n      }\n      return (\n        <span\n          key={index}\n          className={classes.join(' ')}\n          onClick={() => this.props.onChange(item.value)}\n        >{item.label}</span>\n      )\n    })\n  }\n}\n\nexport default GalleryFilter\n","import React, { Component } from 'react'\nimport GalleryFilter from './GalleryFilter'\nimport '../styles/gallery_filters.css'\n\nclass GalleryFilters extends Component {\n  static defaultProps = {\n    loading: false,\n    onChange: () => {},\n    filters: {}\n  }\n\n  render () {\n    return (\n      <div className={this._getClasses()}>\n        {this._getSortFilters()}\n        {this._getLimitFilters()}\n        {this._getModeFilters()}\n      </div>\n    )\n  }\n\n  _getClasses = () => {\n    let classes = ['gallery-filters']\n    if (this.props.loading) {\n      classes.push('gallery-filters--loading')\n    }\n    return classes.join(' ')\n  }\n\n  _getSortFilters = () => {\n    const { sort = 'recent' } = this.props.filters\n    const values = [{\n      value: 'likes',\n      label: 'likes'\n    }, {\n      value: 'recent',\n      label: 'recent'\n    }, {\n      value: 'oldest',\n      label: 'oldest'\n    }]\n    return (\n      <GalleryFilter\n        selected={sort}\n        values={values}\n        onChange={value => this._onChangeFilter('sort', value)}\n      />\n    )\n  }\n\n  _getLimitFilters = () => {\n    const { limit = 50 } = this.props.filters\n    const values = [{\n      value: 10,\n      label: 10\n    }, {\n      value: 50,\n      label: 50\n    }, {\n      value: 0,\n      label: 'all'\n    }]\n    return (\n      <GalleryFilter\n        selected={limit}\n        values={values}\n        onChange={value => this._onChangeFilter('limit', value)}\n      />\n    )\n  }\n\n  _getModeFilters = () => {\n    const { mode = 'gallery' } = this.props.filters\n    const values = [{\n      value: 'gallery',\n      label: 'gallery'\n    }, {\n      value: 'thumb',\n      label: 'thumb'\n    }]\n    return (\n      <GalleryFilter\n        selected={mode}\n        values={values}\n        onChange={value => this._onChangeFilter('mode', value)}\n      />\n    )\n  }\n\n  _onChangeFilter = (name, value) => {\n    this.props.onChange(name, value)\n  }\n}\n\nexport default GalleryFilters\n","import React, { Component } from 'react'\nimport '../styles/spinner.css'\n\nclass Spinner extends Component {\n  render () {\n    return (\n      <div className=\"spinner\">\n        <span className=\"spinner__circle\"></span>\n      </div>\n    )\n  }\n}\n\nexport default Spinner\n","import React, { Component } from 'react'\nimport Header from './Header'\nimport Footer from './Footer'\nimport Gallery from './Gallery'\nimport GalleryFilters from './GalleryFilters'\nimport Spinner from './Spinner'\nimport { api, imageUtils } from '../utils'\nimport '../styles/app.css'\n\nclass App extends Component {\n  state = {\n    username: null,\n    images: [],\n    filters: {},\n    favorites: [],\n    showThumbs: false,\n    loading: false,\n    error: null,\n    lastLimit: 50,\n    exampleUsers: [\n      'angrymikko',\n      'jaromvogel',\n      'zatransis',\n      'rebeccamillsdraws',\n      '⭐️'\n    ]\n  }\n\n  componentDidMount () {\n    if (window.location.hash) {\n      this._checkUsernameInHash(window.location.hash)\n    }\n    window.addEventListener('hashchange', this._onHashChange)\n  }\n\n  render () {\n    const { username, images, loading, error } = this.state\n    return (\n      <div className=\"app\">\n        <Header\n          loading={loading}\n          username={username}\n          onSetUsername={this._onSetUsername}\n        />\n        <GalleryFilters\n          loading={loading}\n          filters={this.state.filters}\n          onChange={this._onFilter}\n        />\n        {!loading &&\n          <Gallery\n            ref={ref => this.gallery = ref}\n            filters={this.state.filters}\n            images={this._galleryImages()}\n            onFavorite={this._onFavorite}\n            thumbView={this.state.filters.mode === 'thumb'}\n            onSelectImage={this._onSelectImage}\n          />\n        }\n        {loading &&\n          <Spinner />\n        }\n        {images.length === 0 && !loading &&\n          <div className=\"app__start\">\n            {error &&\n              <p className=\"app__start__error\">{error}</p>\n            }\n            <p className=\"app__start__message\">Fill the username <span role=\"img\" aria-label=\"point_up\">☝️</span></p>\n            <p className=\"app__start__example\">Examples:</p>\n            <ul className=\"app__start__example-users\">\n              {this._getExampleUsers()}\n            </ul>\n          </div>\n        }\n        <Footer />\n      </div>\n    )\n  }\n\n  _onSetUsername = username => {\n    if (username) {\n      if (username === '⭐️' || username === 'favorites') {\n        window.history.pushState({}, 'username_favorites', '#/@favorites')\n        document.title = `favorites / Insta Gallerify`\n        const images = imageUtils.getFavorites()\n        if (images.length > 0) {\n          this.setState({ username, images })\n        } else {\n          this.setState({\n            error: 'You have no favorites yet!',\n            username: '',\n            images: []\n          })\n        }\n      } else {\n        window.history.pushState({}, `username_${username}`, `#/@${username}`)\n        document.title = `@${username} / Insta Gallerify`\n        const lastLimit = this.state.filters.limit || this.state.lastLimit || 50\n        if (username !== this.state.username) {\n          this.setState({ loading: true, lastLimit }, () => {\n            return this._loadData(username, this.state.filters.limit)\n          })\n        }\n      }\n    } else {\n      this.setState({ username: '', images: [] })\n    }\n  }\n\n  _loadData = (username, limit) => {\n    return api.fetchUser(username, limit).then(images => {\n      this.setState({ username, images })\n    }).catch(error => {\n      this.setState({\n        error: error.message,\n        username: '',\n        images: []\n      })\n    }).finally(() => {\n      this.setState({ loading: false })\n    })\n  }\n\n  _galleryImages = () => {\n    let list = []\n    const { images, filters } = this.state\n    if (images.length > 0) {\n      list = imageUtils.filterImages({ images, ...filters })\n    }\n    list = list.map(photo => {\n      return {\n        ...photo,\n        favorite: imageUtils.isFavorite(photo)\n      }\n    })\n    return list\n  }\n\n  _onFilter = (name, value) => {\n    const filters = {\n      ...this.state.filters,\n      [name]: value\n    }\n    this.setState({ filters }, () => {\n      if (\n        this.state.lastLimit > 0 &&\n        (\n          this.state.lastLimit < filters.limit ||\n          (this.state.lastLimit !== 0 && filters.limit === 0)\n        )\n      ) {\n        const lastLimit = filters.limit\n        this.setState({ loading: true, lastLimit }, () => {\n          this._loadData(this.state.username, lastLimit)\n        })\n      }\n    })\n  }\n\n  _getExampleUsers = () => {\n    const { exampleUsers } = this.state\n    return exampleUsers.map((username, index) => {\n      return (\n        <li key={index}>\n          <span\n            onClick={() => this._onSetUsername(username)}\n          >{username}</span>\n        </li>\n      )\n    })\n  }\n\n  _checkUsernameInHash = hash => {\n    const parts = hash.split('@')\n    if (parts.length > 0) {\n      this._onSetUsername(parts[1])\n    }\n  }\n\n  _onHashChange = event => {\n    this._checkUsernameInHash(event.newURL)\n  }\n\n  _onFavorite = photo => {\n    const images = this.state.images.map(item => {\n      if (item.url === photo.url) {\n        item.favorite = !item.favorite\n      }\n      return item\n    })\n    this.setState({ images })\n  }\n\n  _onSelectImage = index => {\n    const filters = {\n      ...this.state.filters,\n      mode: 'gallery'\n    }\n    this.setState({ filters }, () => {\n      this.gallery.goTo(index)\n    })\n  }\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './styles/index.css';\nimport '../node_modules/slick-carousel/slick/slick.css';\nimport '../node_modules/slick-carousel/slick/slick-theme.css';\n\nimport App from './components/App';\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}